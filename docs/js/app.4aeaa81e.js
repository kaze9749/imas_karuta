(function(){"use strict";var e={3585:function(e,l,a){var u=a(3751),n=a(641),t=a.p+"img/karuta.450578af.png";function o(e,l,a,u,o,i){const v=(0,n.g2)("ImasKaruta");return(0,n.uX)(),(0,n.CE)(n.FK,null,[l[0]||(l[0]=(0,n.Lk)("img",{alt:"Vue logo",src:t},null,-1)),(0,n.bF)(v,{msg:"Welcome to Your Vue.js App"})],64)}a(8111),a(2489);var i=a(33),v=a(953);const r={class:"container"},d={class:"filter-group"},s={class:"filter-row"},c={class:"filter-row"},p={class:"filter-row"},b=["value"],k={class:"filter-row"},f={class:"filter-group"},m=["onUpdate:modelValue"],h={key:0},L=["onUpdate:modelValue","placeholder"],g={key:0,class:"progress-bar"},y=["value"],w=["disabled"],K={class:"filter-group"},C={class:"delay-input"},R={class:"filter-group"},V={class:"playback-count"},E={key:1,class:"playback-group"},x={class:"index-input"},U=["max"],_={key:0},M=["disabled"],O=["disabled"],W=["disabled"],X={key:1},A={key:2,class:"playback-group"},I=["disabled"],T=["disabled"];var F={__name:"ImasKaruta",props:{index:{type:Number,default:0}},emits:["update:index"],setup(e,{emit:l}){const a=(0,n.EW)({get(){return N.value},set(e){if(""===e||null==e)N.value=0;else{const l=parseInt(e,10);if(!isNaN(l)){const e=le.value.length-1;N.value=Math.min(Math.max(l,0),e)}}}});function t(){const e=le.value.length-1;(N.value<0||N.value>e||isNaN(N.value))&&(N.value=0)}const o=(0,v.KR)(100),F=e,j=l,B=(0,v.KR)(!1),J=(0,v.KR)(!1),H=(0,v.KR)(3),N=(0,v.KR)(F.index);(0,n.wB)((()=>F.index),(e=>N.value=e)),(0,n.wB)(N,(e=>j("update:index",e))),(0,n.sV)((()=>{ie.value?.addEventListener("ended",(()=>{J.value&&setTimeout((()=>be()),1e3*H.value)}))}));const P=(0,v.KR)([]),Q=(0,v.KR)(null),$=(0,v.KR)("above"),S=(0,v.KR)(""),Y=(0,v.KR)(null),G=(0,v.KR)("above"),D=(0,v.KR)(""),q=(0,v.KR)(""),z=(0,v.KR)(!1),Z=(0,v.KR)(0),ee=(0,v.KR)({CinderellaGirls:{enabled:!0,count:null},ShinyColors:{enabled:!0,count:null},"MillionLive!":{enabled:!0,count:null},Others:{enabled:!0,count:null},Campus:{enabled:!0,count:null}}),le=(0,v.KR)([]),ae=(0,v.KR)(3),ue=(0,v.KR)(!1);let ne=null;const te=(0,v.KR)("short"),oe=(0,v.KR)(!0),ie=(0,v.KR)(null),ve=(0,n.EW)((()=>le.value.length>0&&N.value<le.value.length?le.value[N.value].name:""));async function re(){const e=await fetch("/imas_karuta/data/idols.json");P.value=await e.json()}function de(){return P.value.filter((e=>{let l=!0;null!==Q.value&&""!==Q.value&&(l="above"===$.value?e.age>=Q.value:e.age<=Q.value);let a=!0;""!==S.value&&(a=e.bloodType===S.value);let u=!0;null!==Y.value&&""!==Y.value&&(u="above"===G.value?e.height>=Y.value:e.height<=Y.value);let n=!0;""!==D.value&&null!==D.value&&(n=e.birthMonth===Number(D.value));let t=!0;return""!==q.value&&(t=e.region.toLowerCase().includes(q.value.toLowerCase())),l&&a&&u&&n&&t}))}function se(e){const l=de().filter((l=>l.brand===e)).length;return l||0}async function ce(e){const l=e.slice(),a=l.length;z.value=!0,Z.value=0;const u=Math.max(1,Math.floor(a/100));for(let t=0;t<a-1;t++){const e=t+Math.floor(Math.random()*(a-t));[l[t],l[e]]=[l[e],l[t]],t%u===0&&(Z.value=Math.min(100,Math.floor(t/(a-1)*100)),await(0,n.dY)())}return Z.value=100,await(0,n.dY)(),await new Promise((e=>setTimeout(e,2e3))),z.value=!1,l}async function pe(){B.value=!0;const e=de();let l=[];for(const a in ee.value)if(ee.value[a].enabled){let u=e.filter((e=>e.brand===a));u.sort((()=>Math.random()-.5));const n=ee.value[a].count;n&&n<u.length&&(u=u.slice(0,n)),l=l.concat(u)}le.value=await ce(l),B.value=!1}async function be(){if(N.value<le.value.length){const e=le.value[N.value],l=`/imas_karuta/audio/${e.brand}/${te.value}/${e.code}_${te.value}.wav`;ie.value.preload="auto",ie.value.src=l,await new Promise((e=>{if(ie.value.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA)return e();ie.value.addEventListener("canplaythrough",(()=>e()),{once:!0})})),ie.value.currentTime=0,await new Promise((e=>{setTimeout((async()=>{await ie.value.play(),e()}),o.value)}))}}function ke(){N.value>0&&(N.value--,be())}function fe(){be()}function me(){N.value<le.value.length-1&&(N.value++,be())}function he(){0!==le.value.length&&(ue.value=!0,ne=()=>{setTimeout((()=>{N.value<le.value.length-1?(N.value++,be()):Le()}),1e3*ae.value)},ie.value?.addEventListener("ended",ne),be())}function Le(){ne&&(ie.value?.removeEventListener("ended",ne),ne=null),ue.value=!1}return re(),(e,l)=>((0,n.uX)(),(0,n.CE)("div",r,[l[40]||(l[40]=(0,n.Lk)("h1",null,"アイマスかるた",-1)),(0,n.Lk)("div",d,[l[23]||(l[23]=(0,n.Lk)("label",{for:"ageInput"},"Age:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=e=>Q.value=e),id:"ageInput",placeholder:"数字を入力"},null,512),[[u.Jo,Q.value,void 0,{number:!0}]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>$.value=e)},l[15]||(l[15]=[(0,n.Lk)("option",{value:"above"},"以上",-1),(0,n.Lk)("option",{value:"below"},"以下",-1)]),512),[[u.u1,$.value]]),(0,n.Lk)("div",s,[l[17]||(l[17]=(0,n.Lk)("label",null,"Blood Type:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>S.value=e)},l[16]||(l[16]=[(0,n.Fv)('<option value="" data-v-7664f072>全て</option><option value="A" data-v-7664f072>A</option><option value="B" data-v-7664f072>B</option><option value="O" data-v-7664f072>O</option><option value="AB" data-v-7664f072>AB</option>',5)]),512),[[u.u1,S.value]])]),(0,n.Lk)("div",c,[l[19]||(l[19]=(0,n.Lk)("label",{for:"heightInput"},"Height:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>Y.value=e),id:"heightInput",placeholder:"数字を入力"},null,512),[[u.Jo,Y.value,void 0,{number:!0}]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e)},l[18]||(l[18]=[(0,n.Lk)("option",{value:"above"},"以上",-1),(0,n.Lk)("option",{value:"below"},"以下",-1)]),512),[[u.u1,G.value]])]),(0,n.Lk)("div",p,[l[21]||(l[21]=(0,n.Lk)("label",{for:"birthMonthFilter"},"Birth Month:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>D.value=e),id:"birthMonthFilter"},[l[20]||(l[20]=(0,n.Lk)("option",{value:""},"全て",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(12,(e=>(0,n.Lk)("option",{key:e,value:e},(0,i.v_)(e),9,b))),64))],512),[[u.u1,D.value,void 0,{number:!0}]])]),(0,n.Lk)("div",k,[l[22]||(l[22]=(0,n.Lk)("label",{for:"regionFilter"},"Region:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>q.value=e),id:"regionFilter",placeholder:"例: 関東"},null,512),[[u.Jo,q.value]])])]),(0,n.Lk)("div",f,[l[26]||(l[26]=(0,n.Lk)("h2",null,"ブランド選択",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ee.value,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"filter-row"},[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>ee.value[a].enabled=e},null,8,m),[[u.lH,ee.value[a].enabled]]),(0,n.eW)(" "+(0,i.v_)(a),1)]),ee.value[a].enabled?((0,n.uX)(),(0,n.CE)("span",h,[l[24]||(l[24]=(0,n.eW)(" 選択数: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>ee.value[a].count=e,min:"1",placeholder:se(a)},null,8,L),[[u.Jo,ee.value[a].count,void 0,{number:!0}]]),l[25]||(l[25]=(0,n.eW)(" （デフォルトは全件） "))])):(0,n.Q3)("",!0)])))),128))]),z.value?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("progress",{value:Z.value,max:"100",style:{width:"100%"}},null,8,y),(0,n.Lk)("span",null,(0,i.v_)(Z.value)+"%",1)])):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"action-btn",onClick:pe,disabled:B.value}," フィルタ実行 ",8,w),(0,n.Lk)("div",K,[l[29]||(l[29]=(0,n.Lk)("h2",null,"音声タイプ選択",-1)),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"short","onUpdate:modelValue":l[7]||(l[7]=e=>te.value=e)},null,512),[[u.XL,te.value]]),l[27]||(l[27]=(0,n.eW)(" Short "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"long","onUpdate:modelValue":l[8]||(l[8]=e=>te.value=e)},null,512),[[u.XL,te.value]]),l[28]||(l[28]=(0,n.eW)(" Long "))])]),l[41]||(l[41]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("label",C,[l[30]||(l[30]=(0,n.eW)(" 再生遅延 (ms): ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[9]||(l[9]=e=>o.value=e),min:"0"},null,512),[[u.Jo,o.value,void 0,{number:!0}]])]),(0,n.Lk)("div",R,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[10]||(l[10]=e=>oe.value=e)},null,512),[[u.lH,oe.value]]),l[31]||(l[31]=(0,n.eW)(" 現在再生中のアイドルを表示 "))])]),(0,n.Lk)("p",V,(0,i.v_)(N.value+1)+" / "+(0,i.v_)(le.value.length),1),le.value.length>0?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("label",x,[l[32]||(l[32]=(0,n.eW)(" 再生インデックス: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[11]||(l[11]=e=>a.value=e),min:0,max:le.value.length-1,onBlur:t},null,40,U),[[u.Jo,a.value]])]),l[35]||(l[35]=(0,n.Lk)("br",null,null,-1)),oe.value?((0,n.uX)(),(0,n.CE)("p",_,"現在再生中: "+(0,i.v_)(ve.value),1)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"control-btn",onClick:ke,disabled:B.value||0===N.value}," 前のアイドル ",8,M),(0,n.Lk)("button",{class:"control-btn",onClick:fe,disabled:B.value}," 再生 ",8,O),(0,n.Lk)("button",{class:"control-btn",onClick:me,disabled:B.value||N.value===le.value.length-1}," 次のアイドル ",8,W),l[36]||(l[36]=(0,n.Lk)("br",null,null,-1)),l[37]||(l[37]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[12]||(l[12]=e=>J.value=e)},null,512),[[u.lH,J.value]]),l[33]||(l[33]=(0,n.eW)(" 繰り返し再生モード "))]),J.value?((0,n.uX)(),(0,n.CE)("label",X,[l[34]||(l[34]=(0,n.eW)(" 繰り返し間隔（秒）: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>H.value=e),min:"1"},null,512),[[u.Jo,H.value,void 0,{number:!0}]])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),le.value.length>0?((0,n.uX)(),(0,n.CE)("div",A,[l[39]||(l[39]=(0,n.Lk)("h2",null,"定期再生モード",-1)),(0,n.Lk)("label",null,[l[38]||(l[38]=(0,n.eW)(" 再生間隔（秒）: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[14]||(l[14]=e=>ae.value=e),min:"1"},null,512),[[u.Jo,ae.value,void 0,{number:!0}]])]),(0,n.Lk)("button",{class:"action-btn",onClick:he,disabled:ue.value}," 定期再生開始 ",8,I),(0,n.Lk)("button",{class:"action-btn",onClick:Le,disabled:!ue.value}," 定期再生停止 ",8,T)])):(0,n.Q3)("",!0),(0,n.Lk)("audio",{ref_key:"audioPlayer",ref:ie},null,512)]))}},j=a(6262);const B=(0,j.A)(F,[["__scopeId","data-v-7664f072"]]);var J=B,H={name:"App",components:{ImasKaruta:J}};const N=(0,j.A)(H,[["render",o]]);var P=N;(0,u.Ef)(P).mount("#app")}},l={};function a(u){var n=l[u];if(void 0!==n)return n.exports;var t=l[u]={exports:{}};return e[u].call(t.exports,t,t.exports,a),t.exports}a.m=e,function(){var e=[];a.O=function(l,u,n,t){if(!u){var o=1/0;for(d=0;d<e.length;d++){u=e[d][0],n=e[d][1],t=e[d][2];for(var i=!0,v=0;v<u.length;v++)(!1&t||o>=t)&&Object.keys(a.O).every((function(e){return a.O[e](u[v])}))?u.splice(v--,1):(i=!1,t<o&&(o=t));if(i){e.splice(d--,1);var r=n();void 0!==r&&(l=r)}}return l}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[u,n,t]}}(),function(){a.d=function(e,l){for(var u in l)a.o(l,u)&&!a.o(e,u)&&Object.defineProperty(e,u,{enumerable:!0,get:l[u]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){a.p="/imas_karuta/"}(),function(){var e={524:0};a.O.j=function(l){return 0===e[l]};var l=function(l,u){var n,t,o=u[0],i=u[1],v=u[2],r=0;if(o.some((function(l){return 0!==e[l]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(v)var d=v(a)}for(l&&l(u);r<o.length;r++)t=o[r],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(d)},u=self["webpackChunkimas_karuta"]=self["webpackChunkimas_karuta"]||[];u.forEach(l.bind(null,0)),u.push=l.bind(null,u.push.bind(u))}();var u=a.O(void 0,[504],(function(){return a(3585)}));u=a.O(u)})();
//# sourceMappingURL=app.4aeaa81e.js.map