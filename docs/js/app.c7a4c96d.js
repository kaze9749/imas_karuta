(function(){"use strict";var e={352:function(e,l,a){var n=a(3751),u=a(641),o=a.p+"img/karuta.450578af.png";function t(e,l,a,n,t,r){const i=(0,u.g2)("ImasKaruta");return(0,u.uX)(),(0,u.CE)(u.FK,null,[l[0]||(l[0]=(0,u.Lk)("img",{alt:"Vue logo",src:o},null,-1)),(0,u.bF)(i,{msg:"Welcome to Your Vue.js App"})],64)}a(8111),a(2489);var r=a(33),i=a(953);const v={class:"container"},c={class:"filter-group"},s={class:"filter-row"},d={class:"filter-row"},p={class:"filter-row"},b=["value"],k={class:"filter-row"},f={class:"filter-group"},h=["onUpdate:modelValue"],L={key:0},m=["onUpdate:modelValue","placeholder"],g={key:0,class:"progress-bar"},y=["value"],w={class:"filter-group"},C={class:"filter-group"},K={class:"playback-count"},R={key:1,class:"playback-group"},V={key:0,class:"control-group"},_={key:0},U={key:2,class:"playback-group"},E=["disabled"],O=["disabled"];var X={__name:"ImasKaruta",setup(e){const l=(0,i.KR)([]),a=(0,i.KR)(null),o=(0,i.KR)("above"),t=(0,i.KR)(""),X=(0,i.KR)(null),I=(0,i.KR)("above"),M=(0,i.KR)(""),x=(0,i.KR)(""),F=(0,i.KR)(!1),j=(0,i.KR)(0),A=(0,i.KR)({CinderellaGirls:{enabled:!0,count:null},ShinyColors:{enabled:!0,count:null},"MillionLive!":{enabled:!0,count:null},Others:{enabled:!0,count:null},Campus:{enabled:!0,count:null}}),W=(0,i.KR)([]),B=(0,i.KR)(!1),Q=(0,i.KR)(0),J=(0,i.KR)(3),T=(0,i.KR)(!1);let P=null;const $=(0,i.KR)("short"),H=(0,i.KR)(!0),Y=(0,i.KR)(null),S=(0,u.EW)((()=>W.value.length>0&&Q.value<W.value.length?W.value[Q.value].name:""));async function G(){const e=await fetch("/imas_karuta/data/idols.json");l.value=await e.json()}function N(){return l.value.filter((e=>{let l=!0;null!==a.value&&""!==a.value&&(l="above"===o.value?e.age>=a.value:e.age<=a.value);let n=!0;""!==t.value&&(n=e.bloodType===t.value);let u=!0;null!==X.value&&""!==X.value&&(u="above"===I.value?e.height>=X.value:e.height<=X.value);let r=!0;""!==M.value&&null!==M.value&&(r=e.birthMonth===Number(M.value));let i=!0;return""!==x.value&&(i=e.region.toLowerCase().includes(x.value.toLowerCase())),l&&n&&u&&r&&i}))}function q(e){const l=N().filter((l=>l.brand===e)).length;return l||0}async function z(e){const l=e.slice(),a=l.length;F.value=!0,j.value=0;const n=Math.max(1,Math.floor(a/100));for(let o=0;o<a-1;o++){const e=o+Math.floor(Math.random()*(a-o));[l[o],l[e]]=[l[e],l[o]],o%n===0&&(j.value=Math.min(100,Math.floor(o/(a-1)*100)),await(0,u.dY)())}return j.value=100,await(0,u.dY)(),await new Promise((e=>setTimeout(e,2e3))),F.value=!1,l}async function D(){const e=N();let l=[];for(const a in A.value)if(A.value[a].enabled){let n=e.filter((e=>e.brand===a));n.sort((()=>Math.random()-.5));const u=A.value[a].count;u&&u<n.length&&(n=n.slice(0,u)),l=l.concat(n)}W.value=await z(l)}function Z(){0!==W.value.length&&(B.value=!0,Q.value=0,ee())}function ee(){if(Q.value<W.value.length){const e=W.value[Q.value],l=`/imas_karuta/audio/${e.brand}/${$.value}/${e.code}_${$.value}.wav`;Y.value.src=l,Y.value.play().catch((e=>console.error(e)))}}function le(){Q.value>0&&(Q.value--,ee())}function ae(){ee()}function ne(){Q.value<W.value.length-1&&(Q.value++,ee())}function ue(){0!==W.value.length&&(T.value=!0,ee(),P=setInterval((()=>{Q.value<W.value.length-1?(Q.value++,ee()):oe()}),1e3*J.value))}function oe(){P&&(clearInterval(P),P=null),T.value=!1}return G(),(e,l)=>((0,u.uX)(),(0,u.CE)("div",v,[l[29]||(l[29]=(0,u.Lk)("h1",null,"アイマスかるた",-1)),(0,u.Lk)("div",c,[l[19]||(l[19]=(0,u.Lk)("label",{for:"ageInput"},"Age:",-1)),(0,u.bo)((0,u.Lk)("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),id:"ageInput",placeholder:"数字を入力"},null,512),[[n.Jo,a.value,void 0,{number:!0}]]),(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e)},l[11]||(l[11]=[(0,u.Lk)("option",{value:"above"},"以上",-1),(0,u.Lk)("option",{value:"below"},"以下",-1)]),512),[[n.u1,o.value]]),(0,u.Lk)("div",s,[l[13]||(l[13]=(0,u.Lk)("label",null,"Blood Type:",-1)),(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>t.value=e)},l[12]||(l[12]=[(0,u.Fv)('<option value="" data-v-cb8dd8f2>全て</option><option value="A" data-v-cb8dd8f2>A</option><option value="B" data-v-cb8dd8f2>B</option><option value="O" data-v-cb8dd8f2>O</option><option value="AB" data-v-cb8dd8f2>AB</option>',5)]),512),[[n.u1,t.value]])]),(0,u.Lk)("div",d,[l[15]||(l[15]=(0,u.Lk)("label",{for:"heightInput"},"Height:",-1)),(0,u.bo)((0,u.Lk)("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>X.value=e),id:"heightInput",placeholder:"数字を入力"},null,512),[[n.Jo,X.value,void 0,{number:!0}]]),(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>I.value=e)},l[14]||(l[14]=[(0,u.Lk)("option",{value:"above"},"以上",-1),(0,u.Lk)("option",{value:"below"},"以下",-1)]),512),[[n.u1,I.value]])]),(0,u.Lk)("div",p,[l[17]||(l[17]=(0,u.Lk)("label",{for:"birthMonthFilter"},"Birth Month:",-1)),(0,u.bo)((0,u.Lk)("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>M.value=e),id:"birthMonthFilter"},[l[16]||(l[16]=(0,u.Lk)("option",{value:""},"全て",-1)),((0,u.uX)(),(0,u.CE)(u.FK,null,(0,u.pI)(12,(e=>(0,u.Lk)("option",{key:e,value:e},(0,r.v_)(e),9,b))),64))],512),[[n.u1,M.value,void 0,{number:!0}]])]),(0,u.Lk)("div",k,[l[18]||(l[18]=(0,u.Lk)("label",{for:"regionFilter"},"Region:",-1)),(0,u.bo)((0,u.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>x.value=e),id:"regionFilter",placeholder:"例: 関東"},null,512),[[n.Jo,x.value]])])]),(0,u.Lk)("div",f,[l[22]||(l[22]=(0,u.Lk)("h2",null,"ブランド選択",-1)),((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(A.value,((e,a)=>((0,u.uX)(),(0,u.CE)("div",{key:a,class:"filter-row"},[(0,u.Lk)("label",null,[(0,u.bo)((0,u.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>A.value[a].enabled=e},null,8,h),[[n.lH,A.value[a].enabled]]),(0,u.eW)(" "+(0,r.v_)(a),1)]),A.value[a].enabled?((0,u.uX)(),(0,u.CE)("span",L,[l[20]||(l[20]=(0,u.eW)(" 選択数: ")),(0,u.bo)((0,u.Lk)("input",{type:"number","onUpdate:modelValue":e=>A.value[a].count=e,min:"1",placeholder:q(a)},null,8,m),[[n.Jo,A.value[a].count,void 0,{number:!0}]]),l[21]||(l[21]=(0,u.eW)(" （デフォルトは全件） "))])):(0,u.Q3)("",!0)])))),128))]),F.value?((0,u.uX)(),(0,u.CE)("div",g,[(0,u.Lk)("progress",{value:j.value,max:"100",style:{width:"100%"}},null,8,y),(0,u.Lk)("span",null,(0,r.v_)(j.value)+"%",1)])):(0,u.Q3)("",!0),(0,u.Lk)("button",{class:"action-btn",onClick:D},"フィルタ実行"),(0,u.Lk)("div",w,[l[25]||(l[25]=(0,u.Lk)("h2",null,"音声タイプ選択",-1)),(0,u.Lk)("label",null,[(0,u.bo)((0,u.Lk)("input",{type:"radio",value:"short","onUpdate:modelValue":l[7]||(l[7]=e=>$.value=e)},null,512),[[n.XL,$.value]]),l[23]||(l[23]=(0,u.eW)(" Short "))]),(0,u.Lk)("label",null,[(0,u.bo)((0,u.Lk)("input",{type:"radio",value:"long","onUpdate:modelValue":l[8]||(l[8]=e=>$.value=e)},null,512),[[n.XL,$.value]]),l[24]||(l[24]=(0,u.eW)(" Long "))])]),(0,u.Lk)("div",C,[(0,u.Lk)("label",null,[(0,u.bo)((0,u.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=e=>H.value=e)},null,512),[[n.lH,H.value]]),l[26]||(l[26]=(0,u.eW)(" 現在再生中のアイドルを表示 "))])]),(0,u.Lk)("p",K,(0,r.v_)(Q.value+1)+" / "+(0,r.v_)(W.value.length),1),W.value.length>0?((0,u.uX)(),(0,u.CE)("div",R,[(0,u.Lk)("button",{class:"action-btn",onClick:Z}," 手動再生開始 "),B.value?((0,u.uX)(),(0,u.CE)("div",V,[H.value?((0,u.uX)(),(0,u.CE)("p",_,"現在再生中: "+(0,r.v_)(S.value),1)):(0,u.Q3)("",!0),(0,u.Lk)("button",{class:"control-btn",onClick:le},"前のアイドル"),(0,u.Lk)("button",{class:"control-btn",onClick:ae},"再生"),(0,u.Lk)("button",{class:"control-btn",onClick:ne},"次のアイドル")])):(0,u.Q3)("",!0)])):(0,u.Q3)("",!0),W.value.length>0?((0,u.uX)(),(0,u.CE)("div",U,[l[28]||(l[28]=(0,u.Lk)("h2",null,"定期再生モード",-1)),(0,u.Lk)("label",null,[l[27]||(l[27]=(0,u.eW)(" 再生間隔（秒）: ")),(0,u.bo)((0,u.Lk)("input",{type:"number","onUpdate:modelValue":l[10]||(l[10]=e=>J.value=e),min:"1"},null,512),[[n.Jo,J.value,void 0,{number:!0}]])]),(0,u.Lk)("button",{class:"action-btn",onClick:ue,disabled:T.value}," 定期再生開始 ",8,E),(0,u.Lk)("button",{class:"action-btn",onClick:oe,disabled:!T.value}," 定期再生停止 ",8,O)])):(0,u.Q3)("",!0),(0,u.Lk)("audio",{ref_key:"audioPlayer",ref:Y},null,512)]))}},I=a(6262);const M=(0,I.A)(X,[["__scopeId","data-v-cb8dd8f2"]]);var x=M,F={name:"App",components:{ImasKaruta:x}};const j=(0,I.A)(F,[["render",t]]);var A=j;(0,n.Ef)(A).mount("#app")}},l={};function a(n){var u=l[n];if(void 0!==u)return u.exports;var o=l[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(l,n,u,o){if(!n){var t=1/0;for(c=0;c<e.length;c++){n=e[c][0],u=e[c][1],o=e[c][2];for(var r=!0,i=0;i<n.length;i++)(!1&o||t>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(r=!1,o<t&&(t=o));if(r){e.splice(c--,1);var v=u();void 0!==v&&(l=v)}}return l}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,u,o]}}(),function(){a.d=function(e,l){for(var n in l)a.o(l,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:l[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){a.p="/imas_karuta/"}(),function(){var e={524:0};a.O.j=function(l){return 0===e[l]};var l=function(l,n){var u,o,t=n[0],r=n[1],i=n[2],v=0;if(t.some((function(l){return 0!==e[l]}))){for(u in r)a.o(r,u)&&(a.m[u]=r[u]);if(i)var c=i(a)}for(l&&l(n);v<t.length;v++)o=t[v],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self["webpackChunkimas_karuta"]=self["webpackChunkimas_karuta"]||[];n.forEach(l.bind(null,0)),n.push=l.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(352)}));n=a.O(n)})();
//# sourceMappingURL=app.c7a4c96d.js.map