(function(){"use strict";var e={7858:function(e,l,a){var u=a(3751),n=a(641),t=a.p+"img/karuta.450578af.png";function o(e,l,a,u,o,i){const v=(0,n.g2)("ImasKaruta");return(0,n.uX)(),(0,n.CE)(n.FK,null,[l[0]||(l[0]=(0,n.Lk)("img",{alt:"Vue logo",src:t},null,-1)),(0,n.bF)(v,{msg:"Welcome to Your Vue.js App"})],64)}a(8111),a(2489);var i=a(33),v=a(953);const r={class:"container"},s={class:"filter-group"},d={class:"filter-row"},c={class:"filter-row"},p={class:"filter-row"},b=["value"],k={class:"filter-row"},f={class:"filter-group"},h=["onUpdate:modelValue"],m={key:0},L=["onUpdate:modelValue","placeholder"],g={key:0,class:"progress-bar"},y=["value"],w=["disabled"],K={class:"filter-group"},C={class:"filter-group"},R={class:"playback-count"},V={key:1,class:"playback-group"},x={class:"index-input"},U=["max"],_={key:0},E=["disabled"],M=["disabled"],O=["disabled"],I={key:1},W={key:2,class:"playback-group"},X=["disabled"],F=["disabled"];var j={__name:"ImasKaruta",props:{index:{type:Number,default:0}},emits:["update:index"],setup(e,{emit:l}){const a=(0,n.EW)({get(){return N.value},set(e){if(""===e||null==e)N.value=0;else{const l=parseInt(e,10);if(!isNaN(l)){const e=Z.value.length-1;N.value=Math.min(Math.max(l,0),e)}}}});function t(){const e=Z.value.length-1;(N.value<0||N.value>e||isNaN(N.value))&&(N.value=0)}const o=e,j=l,A=(0,v.KR)(!1),B=(0,v.KR)(!1),J=(0,v.KR)(3),N=(0,v.KR)(o.index);(0,n.wB)((()=>o.index),(e=>N.value=e)),(0,n.wB)(N,(e=>j("update:index",e))),(0,n.sV)((()=>{te.value?.addEventListener("ended",(()=>{B.value&&setTimeout((()=>ce()),1e3*J.value)}))}));const Q=(0,v.KR)([]),T=(0,v.KR)(null),H=(0,v.KR)("above"),P=(0,v.KR)(""),$=(0,v.KR)(null),Y=(0,v.KR)("above"),S=(0,v.KR)(""),G=(0,v.KR)(""),q=(0,v.KR)(!1),z=(0,v.KR)(0),D=(0,v.KR)({CinderellaGirls:{enabled:!0,count:null},ShinyColors:{enabled:!0,count:null},"MillionLive!":{enabled:!0,count:null},Others:{enabled:!0,count:null},Campus:{enabled:!0,count:null}}),Z=(0,v.KR)([]),ee=(0,v.KR)(3),le=(0,v.KR)(!1);let ae=null;const ue=(0,v.KR)("short"),ne=(0,v.KR)(!0),te=(0,v.KR)(null),oe=(0,n.EW)((()=>Z.value.length>0&&N.value<Z.value.length?Z.value[N.value].name:""));async function ie(){const e=await fetch("/imas_karuta/data/idols.json");Q.value=await e.json()}function ve(){return Q.value.filter((e=>{let l=!0;null!==T.value&&""!==T.value&&(l="above"===H.value?e.age>=T.value:e.age<=T.value);let a=!0;""!==P.value&&(a=e.bloodType===P.value);let u=!0;null!==$.value&&""!==$.value&&(u="above"===Y.value?e.height>=$.value:e.height<=$.value);let n=!0;""!==S.value&&null!==S.value&&(n=e.birthMonth===Number(S.value));let t=!0;return""!==G.value&&(t=e.region.toLowerCase().includes(G.value.toLowerCase())),l&&a&&u&&n&&t}))}function re(e){const l=ve().filter((l=>l.brand===e)).length;return l||0}async function se(e){const l=e.slice(),a=l.length;q.value=!0,z.value=0;const u=Math.max(1,Math.floor(a/100));for(let t=0;t<a-1;t++){const e=t+Math.floor(Math.random()*(a-t));[l[t],l[e]]=[l[e],l[t]],t%u===0&&(z.value=Math.min(100,Math.floor(t/(a-1)*100)),await(0,n.dY)())}return z.value=100,await(0,n.dY)(),await new Promise((e=>setTimeout(e,2e3))),q.value=!1,l}async function de(){A.value=!0;const e=ve();let l=[];for(const a in D.value)if(D.value[a].enabled){let u=e.filter((e=>e.brand===a));u.sort((()=>Math.random()-.5));const n=D.value[a].count;n&&n<u.length&&(u=u.slice(0,n)),l=l.concat(u)}Z.value=await se(l),A.value=!1}function ce(){if(N.value<Z.value.length){const e=Z.value[N.value],l=`/imas_karuta/audio/${e.brand}/${ue.value}/${e.code}_${ue.value}.wav`;te.value.src=l,te.value.play().catch((e=>console.error(e)))}}function pe(){N.value>0&&(N.value--,ce())}function be(){ce()}function ke(){N.value<Z.value.length-1&&(N.value++,ce())}function fe(){0!==Z.value.length&&(le.value=!0,ce(),ae=setInterval((()=>{N.value<Z.value.length-1?(N.value++,ce()):he()}),1e3*ee.value))}function he(){ae&&(clearInterval(ae),ae=null),le.value=!1}return ie(),(e,l)=>((0,n.uX)(),(0,n.CE)("div",r,[l[38]||(l[38]=(0,n.Lk)("h1",null,"アイマスかるた",-1)),(0,n.Lk)("div",s,[l[22]||(l[22]=(0,n.Lk)("label",{for:"ageInput"},"Age:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[0]||(l[0]=e=>T.value=e),id:"ageInput",placeholder:"数字を入力"},null,512),[[u.Jo,T.value,void 0,{number:!0}]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>H.value=e)},l[14]||(l[14]=[(0,n.Lk)("option",{value:"above"},"以上",-1),(0,n.Lk)("option",{value:"below"},"以下",-1)]),512),[[u.u1,H.value]]),(0,n.Lk)("div",d,[l[16]||(l[16]=(0,n.Lk)("label",null,"Blood Type:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>P.value=e)},l[15]||(l[15]=[(0,n.Fv)('<option value="" data-v-0e5f7ee7>全て</option><option value="A" data-v-0e5f7ee7>A</option><option value="B" data-v-0e5f7ee7>B</option><option value="O" data-v-0e5f7ee7>O</option><option value="AB" data-v-0e5f7ee7>AB</option>',5)]),512),[[u.u1,P.value]])]),(0,n.Lk)("div",c,[l[18]||(l[18]=(0,n.Lk)("label",{for:"heightInput"},"Height:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>$.value=e),id:"heightInput",placeholder:"数字を入力"},null,512),[[u.Jo,$.value,void 0,{number:!0}]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>Y.value=e)},l[17]||(l[17]=[(0,n.Lk)("option",{value:"above"},"以上",-1),(0,n.Lk)("option",{value:"below"},"以下",-1)]),512),[[u.u1,Y.value]])]),(0,n.Lk)("div",p,[l[20]||(l[20]=(0,n.Lk)("label",{for:"birthMonthFilter"},"Birth Month:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>S.value=e),id:"birthMonthFilter"},[l[19]||(l[19]=(0,n.Lk)("option",{value:""},"全て",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(12,(e=>(0,n.Lk)("option",{key:e,value:e},(0,i.v_)(e),9,b))),64))],512),[[u.u1,S.value,void 0,{number:!0}]])]),(0,n.Lk)("div",k,[l[21]||(l[21]=(0,n.Lk)("label",{for:"regionFilter"},"Region:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=e=>G.value=e),id:"regionFilter",placeholder:"例: 関東"},null,512),[[u.Jo,G.value]])])]),(0,n.Lk)("div",f,[l[25]||(l[25]=(0,n.Lk)("h2",null,"ブランド選択",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(D.value,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"filter-row"},[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>D.value[a].enabled=e},null,8,h),[[u.lH,D.value[a].enabled]]),(0,n.eW)(" "+(0,i.v_)(a),1)]),D.value[a].enabled?((0,n.uX)(),(0,n.CE)("span",m,[l[23]||(l[23]=(0,n.eW)(" 選択数: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":e=>D.value[a].count=e,min:"1",placeholder:re(a)},null,8,L),[[u.Jo,D.value[a].count,void 0,{number:!0}]]),l[24]||(l[24]=(0,n.eW)(" （デフォルトは全件） "))])):(0,n.Q3)("",!0)])))),128))]),q.value?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("progress",{value:z.value,max:"100",style:{width:"100%"}},null,8,y),(0,n.Lk)("span",null,(0,i.v_)(z.value)+"%",1)])):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"action-btn",onClick:de,disabled:A.value}," フィルタ実行 ",8,w),(0,n.Lk)("div",K,[l[28]||(l[28]=(0,n.Lk)("h2",null,"音声タイプ選択",-1)),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"short","onUpdate:modelValue":l[7]||(l[7]=e=>ue.value=e)},null,512),[[u.XL,ue.value]]),l[26]||(l[26]=(0,n.eW)(" Short "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"long","onUpdate:modelValue":l[8]||(l[8]=e=>ue.value=e)},null,512),[[u.XL,ue.value]]),l[27]||(l[27]=(0,n.eW)(" Long "))])]),(0,n.Lk)("div",C,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=e=>ne.value=e)},null,512),[[u.lH,ne.value]]),l[29]||(l[29]=(0,n.eW)(" 現在再生中のアイドルを表示 "))])]),(0,n.Lk)("p",R,(0,i.v_)(N.value+1)+" / "+(0,i.v_)(Z.value.length),1),Z.value.length>0?((0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("label",x,[l[30]||(l[30]=(0,n.eW)(" 再生インデックス: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[10]||(l[10]=e=>a.value=e),min:0,max:Z.value.length-1,onBlur:t},null,40,U),[[u.Jo,a.value]])]),l[33]||(l[33]=(0,n.Lk)("br",null,null,-1)),ne.value?((0,n.uX)(),(0,n.CE)("p",_,"現在再生中: "+(0,i.v_)(oe.value),1)):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"control-btn",onClick:pe,disabled:A.value||0===N.value}," 前のアイドル ",8,E),(0,n.Lk)("button",{class:"control-btn",onClick:be,disabled:A.value}," 再生 ",8,M),(0,n.Lk)("button",{class:"control-btn",onClick:ke,disabled:A.value||N.value===Z.value.length-1}," 次のアイドル ",8,O),l[34]||(l[34]=(0,n.Lk)("br",null,null,-1)),l[35]||(l[35]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":l[11]||(l[11]=e=>B.value=e)},null,512),[[u.lH,B.value]]),l[31]||(l[31]=(0,n.eW)(" 繰り返し再生モード "))]),B.value?((0,n.uX)(),(0,n.CE)("label",I,[l[32]||(l[32]=(0,n.eW)(" 繰り返し間隔（秒）: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=e=>J.value=e),min:"1"},null,512),[[u.Jo,J.value,void 0,{number:!0}]])])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),Z.value.length>0?((0,n.uX)(),(0,n.CE)("div",W,[l[37]||(l[37]=(0,n.Lk)("h2",null,"定期再生モード",-1)),(0,n.Lk)("label",null,[l[36]||(l[36]=(0,n.eW)(" 再生間隔（秒）: ")),(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>ee.value=e),min:"1"},null,512),[[u.Jo,ee.value,void 0,{number:!0}]])]),(0,n.Lk)("button",{class:"action-btn",onClick:fe,disabled:le.value}," 定期再生開始 ",8,X),(0,n.Lk)("button",{class:"action-btn",onClick:he,disabled:!le.value}," 定期再生停止 ",8,F)])):(0,n.Q3)("",!0),(0,n.Lk)("audio",{ref_key:"audioPlayer",ref:te},null,512)]))}},A=a(6262);const B=(0,A.A)(j,[["__scopeId","data-v-0e5f7ee7"]]);var J=B,N={name:"App",components:{ImasKaruta:J}};const Q=(0,A.A)(N,[["render",o]]);var T=Q;(0,u.Ef)(T).mount("#app")}},l={};function a(u){var n=l[u];if(void 0!==n)return n.exports;var t=l[u]={exports:{}};return e[u].call(t.exports,t,t.exports,a),t.exports}a.m=e,function(){var e=[];a.O=function(l,u,n,t){if(!u){var o=1/0;for(s=0;s<e.length;s++){u=e[s][0],n=e[s][1],t=e[s][2];for(var i=!0,v=0;v<u.length;v++)(!1&t||o>=t)&&Object.keys(a.O).every((function(e){return a.O[e](u[v])}))?u.splice(v--,1):(i=!1,t<o&&(o=t));if(i){e.splice(s--,1);var r=n();void 0!==r&&(l=r)}}return l}t=t||0;for(var s=e.length;s>0&&e[s-1][2]>t;s--)e[s]=e[s-1];e[s]=[u,n,t]}}(),function(){a.d=function(e,l){for(var u in l)a.o(l,u)&&!a.o(e,u)&&Object.defineProperty(e,u,{enumerable:!0,get:l[u]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){a.p="/imas_karuta/"}(),function(){var e={524:0};a.O.j=function(l){return 0===e[l]};var l=function(l,u){var n,t,o=u[0],i=u[1],v=u[2],r=0;if(o.some((function(l){return 0!==e[l]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(v)var s=v(a)}for(l&&l(u);r<o.length;r++)t=o[r],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(s)},u=self["webpackChunkimas_karuta"]=self["webpackChunkimas_karuta"]||[];u.forEach(l.bind(null,0)),u.push=l.bind(null,u.push.bind(u))}();var u=a.O(void 0,[504],(function(){return a(7858)}));u=a.O(u)})();
//# sourceMappingURL=app.0296f724.js.map